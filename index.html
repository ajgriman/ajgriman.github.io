---
layout: default
lang: en # Or the appropriate lang for your default index
page_id: homepage # Or your chosen page_id for the homepage
title: "Homepage EN" # Or your site title
---
{%- assign t = site.data.locales[site.active_lang] -%}

<div class="container-fluid py-4">
    <h1 class="mb-4 text-center">{{ t.homepage_title | default: "My Projects" }}</h1>

    <div class="row gx-4" id="project-grid">
      {%- comment -%}
        Loop through projects for the current active language.
        Polyglot makes 'site.projects' only contain projects for the active language
        if the projects themselves have a 'lang' attribute.
      {%- endcomment -%}
      {%- assign projects_to_display = site.projects | where: "lang", site.active_lang -%}

      {%- if projects_to_display.size == 0 and site.active_lang != site.default_lang -%}
        {%- comment -%} If no projects for the current non-default lang, try showing default lang projects {%- endcomment -%}
        {%- assign projects_to_display = site.projects | where: "lang", site.default_lang -%}
      {%- endif -%}

      {% for project_item in projects_to_display %}
        <div class="col-12 col-md-6 col-lg-4 project-grid-item mb-4">
          {% include project_card.html project=project_item %}
        </div>
      {% else %}
        <div class="col-12">
          <p class="text-center">{{ t.no_projects_yet | default: "No projects to display yet." }}</p>
        </div>
      {% endfor %}
    </div>
</div>

<script>
  // Basic Masonry initialization (if you don't have it elsewhere)
  // Ensure you have the Masonry JS library loaded
  // window.onload = () => {
  //   var grid = document.querySelector('#project-grid');
  //   if (grid) {
  //     var msnry = new Masonry( grid, {
  //       itemSelector: '.project-grid-item',
  //       columnWidth: '.project-grid-item', // or a sizer element/number
  //       percentPosition: true,
  //       gutter: 0 // or your gx-4 equivalent in pixels if needed
  //     });
  //   }
  // }
  // If using Bootstrap's own Masonry (new in BS5.3+), initialization might differ or be automatic.
  // For older Bootstrap or standalone Masonry, the above is a basic example.
  // Bootstrap 5.2+ has responsive cards and columns that might achieve a masonry-like effect without the JS library for simpler cases.
  // If your original hardcoded grid worked without explicit JS Masonry init, then Bootstrap columns are doing the work.
</script>